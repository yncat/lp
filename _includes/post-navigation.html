{% assign sameLangPosts = site.posts | where: "lang", page.lang %}
{% assign currentIndex = 0 %}
{% for post in sameLangPosts %}
  {% if post.url == page.url %}
    {% assign currentIndex = forloop.index0 %}
    {% break %}
  {% endif %}
{% endfor %}
{% assign prevIndex = currentIndex | plus: 1 %}
{% assign nextIndex = currentIndex | minus: 1 %}
{% if prevIndex < sameLangPosts.size %}
  {% assign prevPost = sameLangPosts[prevIndex] %}
{% endif %}
{% if nextIndex >= 0 %}
  {% assign nextPost = sameLangPosts[nextIndex] %}
{% endif %}

<div class="container">
  <div class="post__navigation">
    {% if prevPost %}
    <div class="post__prev">
      <a href="{{prevPost.url}}" class="prev__image">
        {% if prevPost.image and prevPost.video_embed %}
        <div class="video-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <polygon points="40,30 70,50 40,70"></polygon>
          </svg>
        </div>
        {% endif %}
        <img class="lazy" data-src="{{site.baseurl}}{{prevPost.image}}" alt="{{ page.title }}">
      </a>
      <div class="prev__box">
        <span class="post__nav post__nav__prev">Older post</span>
        <h2 class="post__nav__title"><a href="{{prevPost.url}}">{{prevPost.title}}</a></h2>
      </div>
    </div>
    {% endif %}

    {% if nextPost %}
    <div class="post__next">
      <div class="next__box">
        <span class="post__nav post__nav__next">Newer post</span>
        <h2 class="post__nav__title"><a href="{{nextPost.url}}">{{nextPost.title}}</a></h2>
      </div>
      <a href="{{nextPost.url}}" class="next__image">
        {% if nextPost.image and nextPost.video_embed %}
        <div class="video-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <polygon points="40,30 70,50 40,70"></polygon>
          </svg>
        </div>
        {% endif %}
        <img class="lazy" data-src="{{site.baseurl}}{{nextPost.image}}" alt="{{ page.title }}" loading="lazy">
      </a>
    </div>
    {% endif %}
  </div>
</div>